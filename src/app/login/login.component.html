<div class="login-background">
  <div class="logo-container">
    <img src="assets/UMOCUS.gif" alt="UMOCUS" />
  </div>
  <div class="login-container">
    <mat-tab-group animationDuration="0ms">
      <mat-tab label="Anmelden">
        <form [formGroup]="loginForm" (ngSubmit)="onSubmitLogin()">
          <div class="form-group">
            <label for="username">Benutzername</label>
            <input
              type="text"
              id="username"
              formControlName="username"
              [class.invalid]="loginForm.controls['username'].invalid && !loginForm.controls['username'].untouched">
            @if (loginForm.controls['username'].invalid && !loginForm.controls['username'].untouched) {
              <div class="error-message">Benutzername ist erforderlich</div>
            }
          </div>

          <div class="form-group">
            <label for="password">Passwort</label>
            <input
              type="password"
              id="password"
              formControlName="password"
              [class.invalid]="loginForm.controls['password'].invalid && !loginForm.controls['password'].untouched">
            @if (loginForm.controls['password'].invalid && !loginForm.controls['password'].untouched) {
              <div class="error-message">Passwort ist erforderlich</div>
            }
          </div>
          <button type="submit" [disabled]="loginForm.invalid  || this.loginService.loginInProgress()">
            @if (this.loginService.loginInProgress()){
              <mat-spinner diameter="24"/>
            } @else {
              Anmelden
            }
          </button>
        </form>
      </mat-tab>
      <mat-tab label="Registrieren">
        <form [formGroup]="registerForm" (ngSubmit)="onSubmitRegistration()">
          <div class="form-group">
            <label for="username">Benutzername</label>
            <input
              type="text"
              id="username"
              formControlName="username"
              [class.invalid]="registerForm.controls['username'].invalid && !registerForm.controls['username'].untouched">
            @if (registerForm.controls['username'].invalid && !registerForm.controls['username'].untouched) {
              <div class="error-message">Benutzername ist erforderlich</div>
            }
          </div>

          <div class="form-group">
            <label for="password">Passwort</label>
            <input
              type="password"
              id="password"
              formControlName="password"
              [class.invalid]="registerForm.controls['password'].invalid && !registerForm.controls['password'].untouched">
            @if (registerForm.controls['password'].invalid && !registerForm.controls['password'].untouched) {
              <div class="error-message">Passwort ist erforderlich</div>
            }
          </div>

          <div class="form-group">
            <label for="passwordRepeat">Passwort wiederholen</label>
            <input
              type="password"
              id="passwordRepeat"
              formControlName="confirmPassword"
              [class.invalid]="registerForm.controls['confirmPassword'].invalid && !registerForm.controls['confirmPassword'].untouched">
            @if (registerForm.get('password')?.value != registerForm.get('confirmPassword')?.value && !registerForm.controls['confirmPassword'].untouched) {
              <div class="error-message">Passwörter müssen übereinstimmen</div>
            }
          </div>
          <button type="submit" [disabled]="registerForm.invalid || this.loginService.loginInProgress()">
            @if (this.loginService.loginInProgress()){
              <mat-spinner diameter="24"/>
            } @else {
              Registrieren
            }
          </button>
        </form>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>